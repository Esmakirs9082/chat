# useLocalStorage Hook Tests

Этот файл содержит тесты для хуков localStorage.

## Необходимые зависимости

Для запуска тестов установите:

```bash
npm install --save-dev @testing-library/react @testing-library/react-hooks jest @types/jest
```

## Структура тестов

### useLocalStorage

- ✅ Возвращает значение по умолчанию
- ✅ Сохраняет и получает значения
- ✅ Удаляет значения
- ✅ Обрабатывает JSON сериализацию
- ✅ Поддерживает функциональные обновления
- ✅ SSR safe (безопасен для серверного рендеринга)
- ✅ Graceful error handling

### useTheme

- ✅ Возвращает тему по умолчанию (system)
- ✅ Устанавливает тему и обновляет DOM классы
- ✅ Переключение темы (light → dark → system → light)
- ✅ Обработка системной темы
- ✅ Автоматическая синхронизация между вкладками

### useChatHistory

- ✅ Пустая история по умолчанию
- ✅ Добавление чатов в историю
- ✅ Обновление существующих чатов
- ✅ Удаление чатов
- ✅ Очистка всей истории
- ✅ Поиск по ID и характеру
- ✅ Получение последних чатов

### useUserPreferences

- ✅ Настройки по умолчанию
- ✅ Обновление настроек
- ✅ Обновление уведомлений
- ✅ Обновление настроек отображения
- ✅ Сброс к значениям по умолчанию
- ✅ Функциональные обновления

## Запуск тестов

```bash
npm test useLocalStorage
```

## Покрытие кода

Ожидаемое покрытие: 95%+

Основные сценарии тестирования:

- Нормальные операции
- Ошибки localStorage
- SSR совместимость
- Синхронизация между вкладками
- Типизация TypeScript
